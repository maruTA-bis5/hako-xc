―――――――――――――――――――――――――――――――――――
 箱庭諸島2 for PHP-XOOPSモジュール Ver 0.8   2003/5/28
―――――――――――――――――――――――――――――――――――
 箱庭諸島2 for PHP-XOOPSモジュールは、
 Watson さん (http://scrlab.g-7.ne.jp/) が配布されている
「箱庭諸島2 for PHP」をXOOPSのモジュールとして nao-pon が改造し、配布
 しています。
 以下の使用・配布条件は、「箱庭諸島2 for PHP」に沿っていますので、必ず
 守っていただきますよう、お願い致します。
 なお、XOOPSモジュール版に対する、質問・要望・その他の連絡は、
 Watson さんに絶対にしないでください。
 XOOPSモジュール版のサポートは、なおきの部屋[XOOPS版]にて行っています。
 なおきの部屋[XOOPS版] (URL) http://hypweb.net/xoops/

※「箱庭諸島」は高負荷のため、レンタルサーバの場合、設置を禁止している
ところが多いです。
PHP版はCGI版に比べ負荷が少ないとはいえ、設置の前には、サーバー管理者に
必ず了解を得た上でインストールしてください。
この「箱庭諸島2 PHP-XOOPS」が原因である日突然アカウントを抹消されても
当方は一切責任は負えませんので、あしからずご了承ください。

―――――――――――――――――――――――――――――――――――
 使用条件
―――――――――――――――――――――――――――――――――――
 箱庭諸島2のスクリプトについては、自己責任で使用する限り、基本的には
 自由に利用してもらってかまいません。ただし、変更を加えた場合は、変更
 したものを配布するには、後述の「配布条件」に従って下さい。
 また商用利用は一切できません。商用禁止とさせていただきます。

―――――――――――――――――――――――――――――――――――
 配布条件
―――――――――――――――――――――――――――――――――――
 箱庭諸島2 for PHP-XOOPSモジュールのスクリプトを改変し、それを他人に
 譲渡、配布する場合には、以下の制約を課します。

・無料配布であること。
・ゲーム画面のトップに表示される、スクリプトの配布元へのリンクを
  消すのを禁止すること。また、それ以外の改造は許可すること。
・本条件と同等に、改造したものの配布を許可すること。
・配布するページにおいて、オリジナルスクリプトの配布元として当サイトへ
  のリンクを置くこと。

―――――――――――――――――――――――――――――――――――
 設置方法の説明
―――――――――――――――――――――――――――――――――――

――設置の手順――
はじめに、'config.php.dev' を 'config.php' にリネームしてください。

'config.php'中の、「基本的な設定」のところにある設定値を、お好みの値に
設定します。
デフォルトのままでよければ、設定するところはありません。
ただし、メール送信を有効で使用するには、mb_string が必須です。
サーバーのPHPに mb_string が導入されていない場合は、メール送信機能は
「使用しない」に設定してください。

XOOPSのモジュールディレクトリに解凍したファイルをすべてディレクトリごと
アップロードしてください。
XOOPSのモジュール管理より「箱庭諸島」をインストールしてください。
管理者画面に「箱庭諸島」のバナーアイコンが表示されますので、クリックして
ください。
「新しいデータを作る」をクリックして、実行してください。

セーフモードがOnになっているサーバではエラーメッセージが表示されますので
画面の指示に従ってください。また、config.phpの設定で$backupTimesは0にする
必要があります。
  var $backupTimes	= 0;

以上でインストールは完了です。

―――――――――――――――――――――――――――――――――――
 XOOPSモジュール版独自の機能について
―――――――――――――――――――――――――――――――――――
○XOOPSにログインしてプレイすることを前提に設定してありますので、
　ログインしないとプレイできません。そのかわり、箱庭用のパスワードは
　必要なくなりました。ログインすることで「開発」ボタンが表示される
　ようになるなど、適切なナビゲーションがされます。

○ユーザーの選択で、観光者通信(簡易BBS)の書き込み時やターンごとの
　イベント内容をメール送信されるように設定できます。

○複数の箱庭諸島をひとつのXOOPSにインストールするできます。
　ダウンロード後解凍すると「hako」ディレクトリに展開されますが、
　2個目以降は、「hako」を「hako2」などと違うディレクトリ名にします。
　そして、「xoops_version.php」の「$modversion['dirname']」を改名した
　ディレクトリ名と合わせます。
　例：
  $modversion['dirname'] = "hako2";
　それから、サーバーにアップロードして、手順どおりインストールします。

○PHP版にプラスして以下のアイテムが建設できます。

　・遊園地
　　　遊園地を建設すると毎ターンごとに島の人口に応じた収益が得られます。
　　　30%の確率でイベントが開催され食料が消費されます。
　　　イベント開催時は、そのイベントが成功すれば増収・失敗したら減収と
　　　なります。
　　　老朽化により閉園となることがあります。

　・海の家と砂浜
　　　海の家を建設すると毎ターンごとに海の家の収容人数に応じた収益が
　　　得られます。
　　　人口に対して、砂浜の整備状況が少ないと海の家の収容人数が増えません。
　　　周囲の人口と、砂浜の整備状況のバランスがとれていると、順調に規模が
　　　大きくなっていきます。
　　　周囲の砂浜の整備状況に対して、人口が多すぎると(約340%を境に)
　　　海の家はマイナス成長となります。
　　　海の家は収容人数により、海の家⇒民宿⇒リゾートホテル となります。

　・港と船
　　　造船は、「客船」と「漁船」があります。
　　　客船を造船すると、毎ターンごとに収益が得られます。
　　　漁船を造船すると、毎ターンごとに、食料が得られます。
　　　しかし、島に港がないと、それらを受け取ることができません。
　　　また、船には維持費が掛かります。

○JavaScriptが有効なブラウザでアクセスした場合は、JavaScript版の
　開発画面が表示されるようになっています。
　JavaScript版の開発画面は独自の拡張が施してあります。
　・コマンド計画表の編集中の行がハイライト表示される。
　・編集中の対象ヘックス(セル)に黄色の枠線が表示される。
　・マウスでさしているヘックスに赤色の枠線が表示される。
　・選択したコマンドにより、数量の項目が動的に変化する。
　・ポップアップされる詳細ウィンドウがマウスに追従する。
　・他、諸々。

―――――――――――――――――――――――――――――――――――
